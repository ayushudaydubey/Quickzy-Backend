import{e as x,a as b,u as w,d as o,b as d,j as e,L as y,g as N,S as j,h as m,f as v}from"./index-C3cbDq9_.js";/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],z=x("shopping-bag",k);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],F=x("trash-2",C),_=t=>{if(!t)return"https://placehold.co/120x100/F0F0F0/333333?text=No+Image";let s="";if(Array.isArray(t.images)&&t.images.length>0){const a=t.images[0];typeof a=="string"&&(s=a),typeof a=="object"&&(s=a.url||a.secure_url||a.path||a.src||a.publicUrl||"")}return!s&&t.image&&(typeof t.image=="string"&&(s=t.image),typeof t.image=="object"&&(s=t.image.url||t.image.secure_url||t.image.path||t.image.src||t.image.publicUrl||"")),s&&String(s).trim()!==""?s:"https://placehold.co/120x100/F0F0F0/333333?text=No+Image"},S=()=>{const t=b(),s=w(),a=o(i=>i.cart.items||[]),u=o(i=>i.cart.status),[h,c]=d.useState(!1);d.useEffect(()=>{let i=!0;return(async()=>{c(!0);try{await t(m()).unwrap()}catch{}i&&c(!1)})(),()=>i=!1},[t]);const p=async i=>{try{await v.delete(`/cart/item/${i}`,{withCredentials:!0}),await t(m()).unwrap()}catch(r){console.error("Failed to remove item",r)}};return h||u==="loading"?e.jsx("div",{className:"max-w-6xl mx-auto px-6 py-20 text-center bg-neutral-50 min-h-screen",children:e.jsx(y,{size:"md",text:"Loading Cart..."})}):!a||a.length===0?e.jsx("div",{className:`max-w-4xl mx-auto px-6 py-20 text-center bg-white min-h-[60vh]
`,children:e.jsxs("div",{className:"p-12 border-4 border-dashed border-neutral-200 rounded-xl",children:[e.jsx(z,{className:"w-12 h-12 mx-auto text-zinc-700 mb-4"}),e.jsx("h2",{className:"text-3xl font-bold text-zinc-900 mb-2",children:"Your Cart is Empty"}),e.jsx("p",{className:"text-zinc-600 mb-8",children:"Add products from our catalog to fill your cart."}),e.jsxs(N,{to:"/product",className:"inline-flex items-center gap-2 px-8 py-3 bg-zinc-950 text-white font-medium rounded-lg uppercase tracking-wider hover:bg-zinc-800 transition-colors shadow-lg",children:[e.jsx(j,{className:"w-5 h-5"}),"Browse Products"]})]})}):e.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 py-10 bg-neutral-50 min-h-screen",children:[e.jsx("h1",{className:"text-4xl font-medium text-zinc-950 border-b border-neutral-300 pb-4 mb-8",children:"Your Cart"}),e.jsx("div",{className:"space-y-4",children:[...a].reverse().map(i=>{const r=i.productId||{},l=Number(r.price||0),n=Number(i.quantity||1),g=_(r);return e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 bg-white p-5 rounded-xl shadow-lg border border-neutral-200",children:[e.jsx("div",{className:"w-full sm:w-32 h-24 flex-shrink-0 border border-neutral-200 rounded-lg overflow-hidden",children:e.jsx("img",{src:g,alt:r.title,className:"w-full h-full object-cover",onError:f=>f.currentTarget.src="https://placehold.co/120x100/F0F0F0/333333?text=No+Image"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{onClick:()=>s(`/product/${r._id}`),className:"text-lg font-bold text-zinc-950 hover:text-zinc-700 cursor-pointer transition-colors truncate",children:r.title}),e.jsx("p",{className:"text-zinc-600 text-sm mt-1 mb-2 line-clamp-2",children:r.description||"No description available."}),e.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[e.jsxs("div",{className:"text-base font-semibold text-zinc-950",children:["Item Total: â‚¹",(l*n).toFixed(2)]}),e.jsxs("div",{className:"flex items-center text-sm text-neutral-700",children:[e.jsx("span",{className:"mr-2 font-medium",children:"Quantity:"}),e.jsx("div",{className:"font-bold",children:n})]})]})]}),e.jsxs("div",{className:"flex flex-row sm:flex-col justify-end items-end sm:items-stretch gap-2 mt-3 sm:mt-0 sm:w-28",children:[e.jsx("button",{onClick:()=>s(`/checkout/${r._id}`,{state:{quantity:n}}),className:"w-full flex items-center justify-center gap-1 px-3 py-2 bg-zinc-950 text-white text-sm font-medium rounded-md hover:bg-zinc-800 transition-colors shadow-md",children:"Buy Now"}),e.jsxs("button",{onClick:()=>p(r._id),className:"w-full flex items-center justify-center gap-1 px-3 py-2 border border-red-600 text-red-600 text-sm font-medium rounded-md hover:bg-red-50 transition-colors",children:[e.jsx(F,{className:"w-4 h-4"}),"Remove"]})]})]},r._id||Math.random())})}),e.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row items-center justify-between border-t border-neutral-300 pt-6",children:[e.jsx("button",{onClick:()=>s("/"),className:"order-2 sm:order-1 w-full sm:w-auto mt-4 sm:mt-0 px-6 py-3 border border-zinc-950 text-zinc-950 font-medium rounded-lg uppercase tracking-wider hover:bg-zinc-100 transition-colors",children:"Continue Shopping"}),e.jsxs("div",{className:"order-1 sm:order-2 text-base text-zinc-600 p-2 bg-white rounded-lg shadow-inner",children:[e.jsx("span",{className:"font-semibold",children:"Note:"})," Purchase is done per item using the 'Buy Now' button."]})]})]})};export{S as default};
