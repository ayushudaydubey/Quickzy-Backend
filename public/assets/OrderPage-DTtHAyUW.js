import{b as n,f as c,j as e,L as x}from"./index-Cq2iuTYL.js";const o=()=>{const[r,i]=n.useState(null);return n.useEffect(()=>{c.get("/cart/orders",{withCredentials:!0}).then(s=>{const l=s.data.orders||[];i(l),l.forEach(async t=>{if(t.adminSetEta&&!t.etaNotified)try{const a=t.expectedDeliveryDate?new Date(t.expectedDeliveryDate).toLocaleDateString():null;a?window.alert(`Your product delivery confirmed on ${a}`):window.alert("Your delivery date has been set by admin."),await c.put(`/cart/orders/${t._id}/ack-eta`,{},{withCredentials:!0})}catch(a){console.error("ack-eta error",a)}})}).catch(()=>i([]))},[]),r===null?e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsx(x,{size:"lg"})}):r.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] text-gray-600",children:[e.jsx("img",{src:"https://cdn-icons-png.flaticon.com/512/4076/4076500.png",className:"w-28 opacity-70 mb-4"}),e.jsx("p",{className:"text-lg",children:"No orders yet."})]}):e.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 py-10",children:[e.jsx("h1",{className:"text-4xl font-medium text-gray-900 mb-8",children:"My Orders"}),e.jsx("div",{className:"space-y-6",children:r.map((s,l)=>{var a;const t=s.product;return e.jsxs("div",{className:"bg-white rounded-2xl shadow-md border p-5 sm:p-6 flex flex-col sm:flex-row gap-6 hover:shadow-lg transition-all duration-300",children:[e.jsx("div",{className:"flex-shrink-0 mx-auto sm:mx-0",children:e.jsx("img",{src:((a=t==null?void 0:t.images)==null?void 0:a[0])||"https://via.placeholder.com/300?text=No+Image",alt:t==null?void 0:t.title,className:"w-32 h-32 sm:w-36 sm:h-36 object-cover rounded-xl border shadow-sm",onError:d=>{d.target.src="https://via.placeholder.com/300?text=No+Image"}})}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:t==null?void 0:t.title}),e.jsx("p",{className:"text-gray-600 text-sm line-clamp-2 leading-relaxed",children:t==null?void 0:t.description}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3 text-sm text-gray-700 mt-3",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Price:"})," ₹",t==null?void 0:t.price]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Qty:"})," ",s.quantity]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Total:"})," ₹",s.total]})]}),e.jsxs("div",{className:"pt-2",children:[e.jsx("span",{className:`px-3 py-1 text-xs sm:text-sm font-medium rounded-full 
                        ${s.status==="pending"?"bg-yellow-100 text-yellow-700":s.status==="delivered"?"bg-green-100 text-green-700":"bg-gray-200 text-gray-700"}
                      `,children:s.status.toUpperCase()}),s.expectedDeliveryDate&&e.jsxs("div",{className:"text-sm text-gray-600 mt-2",children:["Estimated delivery: ",e.jsx("span",{className:"font-medium",children:new Date(s.expectedDeliveryDate).toLocaleDateString()}),new Date(s.expectedDeliveryDate)>new Date&&e.jsxs("span",{className:"text-gray-500",children:[" — in ",Math.ceil((new Date(s.expectedDeliveryDate)-new Date)/(1e3*60*60*24))," days"]})]})]})]})]},l)})})]})};export{o as default};
