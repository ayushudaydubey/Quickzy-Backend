import{b as c,c as b,u as j,j as s,f as v}from"./index-C3cbDq9_.js";import{P as N}from"./ProductCard-nNZ5yNMv.js";const P=()=>{const[n,d]=c.useState([]),[u,m]=c.useState(!0),[h,x]=c.useState(6),i=b();j(),c.useEffect(()=>{try{window.scrollTo({top:0,behavior:"auto"})}catch{}},[i.pathname,i.search]);const g=new URLSearchParams(i.search),a=g.get("search")||"",r=g.get("category")||"";c.useEffect(()=>{(async()=>{m(!0);try{const t=new URLSearchParams;a&&t.set("search",a),r&&t.set("category",r);const l=`/products${t.toString()?`?${t.toString()}`:""}`,y=await v.get(l);d(y.data||[])}catch(t){console.error("Failed to fetch products",t),d([])}finally{m(!1)}})()},[a,r]);const p=(e=6)=>s.jsx("div",{className:"grid gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3",children:Array.from({length:e}).map((t,l)=>s.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-4 border border-gray-200",children:[s.jsx("div",{className:"mb-4",children:s.jsx("div",{className:"h-48 w-full bg-gray-200 rounded-xl animate-pulse"})}),s.jsx("div",{className:"h-5 bg-gray-200 rounded w-3/4 animate-pulse mb-2"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-full animate-pulse mb-2"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 animate-pulse"})]},l))});if(u)return s.jsx("div",{className:"max-w-7xl mx-auto p-4 sm:p-6",children:p(6)});const o=[];a&&o.push(`"${a}"`),r&&o.push(`in ${r}`);const f=o.length?`Search results ${o.join(" ")}`:"Everything is here ";return s.jsxs("div",{className:"max-w-7xl mx-auto p-4 sm:p-6",children:[s.jsx("h1",{className:"text-3xl sm:text-4xl font-medium mb-8 text-gray-900 tracking-tight",children:f}),n.length===0?s.jsxs("div",{className:"text-center py-20",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-700",children:"No products found."}),s.jsx("p",{className:"text-gray-500 mt-2",children:"Try searching for something else."})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3",children:n.slice(0,h).map(e=>s.jsx(N,{product:e,showBuy:!0},e._id))}),h<n.length&&s.jsx("div",{className:"mt-10 text-center",children:s.jsx("button",{onClick:()=>x(e=>Math.min(e+6,n.length)),className:`
                  px-7 py-3 
                  bg-black text-white 
                  rounded-xl 
                  shadow-lg hover:shadow-xl 
                  hover:bg-zinc-900 
                  transition-all duration-300 
                  text-sm sm:text-base
                `,children:"Load More"})})]})]})};export{P as default};
