import{k as h,b as d,j as e,i as m,g as o,f as g,y as j}from"./index-Cq2iuTYL.js";const p=()=>{var n,i,c;const{orderId:a}=h(),[s,r]=d.useState(null),[x,l]=d.useState(!0),u=async()=>{l(!0);try{const t=await g.get(`/admin/payments/${encodeURIComponent(a)}`,{withCredentials:!0});r(t.data.payment||null)}catch(t){console.error("Failed to fetch payment",(t==null?void 0:t.response)||t),j.error("Failed to load payment. Are you an admin?"),r(null)}finally{l(!1)}};return d.useEffect(()=>{a&&u()},[a]),x?e.jsx("div",{className:"text-center mt-12",children:"Loading payment…"}):s?e.jsxs("div",{className:"max-w-5xl mx-auto p-6",children:[e.jsx(m,{}),e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(o,{to:"/admin/payments",className:"inline-flex items-center gap-2 text-sm text-gray-600 hover:text-gray-900",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),e.jsx("h1",{className:"text-2xl font-bold",children:"Payment"})]}),e.jsx("div",{children:e.jsx("div",{className:`inline-block px-3 py-1 rounded-full text-sm ${s.status==="completed"?"bg-green-50 text-green-700":s.status==="failed"?"bg-red-50 text-red-700":"bg-yellow-50 text-yellow-700"}`,children:s.status})})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-md p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"md:col-span-1",children:s.product?e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[s.product.image?e.jsx("img",{src:s.product.image,alt:s.product.title,className:"mx-auto w-40 h-40 object-cover rounded-lg"}):e.jsx("div",{className:"w-40 h-40 bg-gray-100 rounded-lg mx-auto flex items-center justify-center text-gray-400",children:"No Image"}),e.jsx("div",{className:"mt-3 font-semibold",children:s.product.title}),e.jsxs("div",{className:"text-sm text-gray-500",children:["₹",s.product.price]})]}):e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[e.jsx("div",{className:"font-medium",children:"No product info"}),e.jsx("div",{className:"text-sm text-gray-500",children:"(Product not attached to payment)"})]})}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Order ID"}),e.jsx("div",{className:"font-medium break-all",children:s.orderId}),e.jsx("div",{className:"text-sm text-gray-500 mt-3",children:"Payment ID"}),e.jsx("div",{className:"font-medium",children:s.paymentId||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Amount"}),e.jsxs("div",{className:"font-medium",children:["₹",s.amount," ",s.currency]}),e.jsx("div",{className:"text-sm text-gray-500 mt-3",children:"Created"}),e.jsx("div",{className:"font-medium",children:new Date(s.createdAt).toLocaleString()})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Customer"}),e.jsx("div",{className:"font-medium",children:((n=s.userId)==null?void 0:n.username)||((i=s.userId)==null?void 0:i.email)||"Guest"}),e.jsx("div",{className:"text-sm text-gray-600",children:(c=s.userId)==null?void 0:c.email})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Meta"}),e.jsx("pre",{className:"bg-gray-50 p-3 rounded mt-2 text-sm overflow-auto",children:JSON.stringify(s.meta||{},null,2)})]})]})]})})]}):e.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[e.jsx(m,{}),e.jsx("div",{className:"text-red-600",children:"Payment not found."}),e.jsx(o,{to:"/admin/payments",className:"mt-4 inline-block text-sm text-blue-600",children:"Back to payments"})]})};export{p as default};
